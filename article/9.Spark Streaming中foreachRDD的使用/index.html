<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="keyword"  content="">
    <link rel="shortcut icon" href="/img/ironman-draw.png">
    <!-- Place this tag in your head or just before your close body tag. -->
    <script async defer src="https://buttons.github.io/buttons.js"></script>
    <title>
        
           Spark Streaming中foreachRDD的使用  - 暗也橙子 | Blog
        
    </title>

    <link rel="canonical" href="http://www.ruozedata.com/article/9.Spark Streaming中foreachRDD的使用/">

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="/css/bootstrap.min.css">

    <!-- Custom CSS --> 
    <link rel="stylesheet" href="/css/beantech.min.css">

    <link rel="stylesheet" href="/css/donate.css">
    
    <!-- Pygments Highlight CSS -->
    <link rel="stylesheet" href="/css/highlight.css">

    <link rel="stylesheet" href="/css/widget.css">

    <link rel="stylesheet" href="/css/rocket.css">

    <link rel="stylesheet" href="/css/signature.css">

    <link rel="stylesheet" href="/css/toc.css">

    <!-- Custom Fonts -->
    <!-- <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css"> -->
    <!-- Hux change font-awesome CDN to qiniu -->
    <link href="https://cdn.staticfile.org/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">


    <!-- Hux Delete, sad but pending in China
    <link href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/
    css'>
    -->


    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- ga & ba script hoook -->
    <script></script>
</head>


<!-- hack iOS CSS :active style -->
<body ontouchstart="">
	<!-- Modified by Yu-Hsuan Yen -->
<!-- Post Header -->
<style type="text/css">
    header.intro-header{
        
            background-image: url('/img/article_header/article_header.png')
            /*post*/
        
    }
    
</style>

<header class="intro-header" >
    <!-- Signature -->
    <div id="signature">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                
                    <div class="post-heading">
                        <div class="tags">
                            
                              <a class="tag" href="/tags/#spark" title="spark">spark</a>
                            
                        </div>
                        <h1> Spark Streaming中foreachRDD的使用 </h1>
                        <h2 class="subheading"></h2>
                        <span class="meta">
                            Posted by 暗也橙子 on
                            2019-08-06
                        </span>
                    </div>
                


                </div>
            </div>
        </div>
    </div>
</header>

	
    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">暗也橙子Blog</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <!-- Known Issue, found by Hux:
            <nav>'s height woule be hold on by its content.
            so, when navbar scale out, the <nav> will cover tags.
            also mask any touch event of tags, unfortunately.
        -->
        <div id="huxblog_navbar">
            <div class="navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="/">Home</a>
                    </li>

                    

                        
                    

                        
                        <li>
                            <a href="/archive/">Archives</a>
                        </li>
                        
                    

                        
                    

                        
                        <li>
                            <a href="/tags/">Tags</a>
                        </li>
                        
                    

                        
                    
                    
                </ul>
            </div>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>
<script>
    // Drop Bootstarp low-performance Navbar
    // Use customize navbar with high-quality material design animation
    // in high-perf jank-free CSS3 implementation
    var $body   = document.body;
    var $toggle = document.querySelector('.navbar-toggle');
    var $navbar = document.querySelector('#huxblog_navbar');
    var $collapse = document.querySelector('.navbar-collapse');

    $toggle.addEventListener('click', handleMagic)
    function handleMagic(e){
        if ($navbar.className.indexOf('in') > 0) {
        // CLOSE
            $navbar.className = " ";
            // wait until animation end.
            setTimeout(function(){
                // prevent frequently toggle
                if($navbar.className.indexOf('in') < 0) {
                    $collapse.style.height = "0px"
                }
            },400)
        }else{
        // OPEN
            $collapse.style.height = "auto"
            $navbar.className += " in";
        }
    }
</script>


    <!-- Main Content -->
    <!-- Modify by Yu-Hsuan Yen -->

<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">

            <!-- Post Container -->
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                post-container">

                <h3 id="spark-streaming中foreachrdd的使用">Spark Streaming中foreachRDD的使用</h3>
<hr>
<h4 id="概述">概述</h4>
<p>在Spark 官网中，foreachRDD被划分到Output Operations on DStreams中，所以我们首先要明确的是，它是一个输出操作的算子，然后再来看官网对它的含义解释：</p>
<table>
<thead>
<tr>
<th>Output Operation</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td>foreachRDD(func)</td>
<td>The most generic output operator that applies a function, func, to each RDD generated from the stream. This function should push the data in each RDD to an external system, such as saving the RDD to files, or writing it over the network to a database. Note that the function func is executed in the driver process running the streaming application, and will usually have RDD actions in it that will force the computation of the streaming RDDs</td>
</tr>
</tbody>
</table>
<ul>
<li>最常用的输出操作</li>
<li>需要一个函数作为参数，函数作用于DStream中的每一个RDD</li>
<li>函数将RDD中的数据输出到外部系统，如文件、数据库</li>
<li>函数在driver上执行</li>
<li>函数中通常要有action算子，因为foreachRDD本身是transform算子</li>
</ul>
<h4 id="测试">测试</h4>
<p>需求：用Spark Streaming把WC结果写到MySQL<br>
MySQLUtils</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">object MySQLUtils &#123;</span><br><span class="line"></span><br><span class="line">  def getConnection() = &#123;</span><br><span class="line">    Class.forName(<span class="string">"com.mysql.jdbc.Driver"</span>)</span><br><span class="line">    DriverManager.getConnection(<span class="string">"jdbc:mysql://hadoop000:3306/test"</span>, <span class="string">"root"</span>, <span class="string">"123456"</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  def closeConnection(connection: Connection): Unit =&#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="literal">null</span> != connection) &#123;</span><br><span class="line">      connection.close()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="version10">Version1.0</h5>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">  val result = stream.flatMap(_.split(<span class="string">","</span>)).map((_, <span class="number">1</span>)).reduceByKey(_ + _)  </span><br><span class="line">  result.foreachRDD(<span class="function"><span class="params">rdd</span> =&gt;</span> &#123;</span><br><span class="line">  val connection = MySQLUtils.getConnection() <span class="comment">//executed at the driver</span></span><br><span class="line">  rdd.foreach(<span class="function"><span class="params">pair</span> =&gt;</span> &#123;</span><br><span class="line">    val sql = <span class="string">"insert into wc(word,cnt) values(?,?)"</span></span><br><span class="line">    val statement = connection.prepareStatement(sql) <span class="comment">//executed at the worker</span></span><br><span class="line">    statement.setString(<span class="number">1</span>, pair._1)</span><br><span class="line">    statement.setInt(<span class="number">2</span>, pair._2)</span><br><span class="line">    statement.execute()</span><br><span class="line">  &#125;)</span><br><span class="line">  MySQLUtils.closeConnection(connection)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>执行后会报错，Task not serializable<br>
我们使用foreachRDD向外部系统输出数据时，通常要创建一个连接对象，如果像上面的代码中创建在driver上，而foreach这个算子是在executor端执行，connection不是序列化的。通常会报序列化错误或者初始化错误。其实这是一个闭包问题,在函数内部引用了一个外部的变量。</p>
<h5 id="version20">Version2.0</h5>
<p>为了解决闭包问题，我们把connection放到foreach中。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">val result = stream.flatMap(_.split(<span class="string">","</span>)).map((_, <span class="number">1</span>)).reduceByKey(_ + _)</span><br><span class="line">result .foreachRDD(<span class="function"><span class="params">rdd</span> =&gt;</span> &#123; </span><br><span class="line">  rdd.foreach(<span class="function"><span class="params">pair</span> =&gt;</span> &#123;</span><br><span class="line">  val connection = MySQLUtils.getConnection() <span class="comment">//executed at the driver</span></span><br><span class="line">  val sql = s<span class="string">"insert into wc(word,cnt) values('$&#123;pair._1&#125;', $&#123;pair._2&#125;)"</span></span><br><span class="line">  connection.createStatement().execute(sql)</span><br><span class="line">  MySQLUtils.closeConnection(connection)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>这样虽然不会报错，但是foreach中的每一个元素都会创建连接对象，浪费资源，foreach适用于对每一个元素进行操作的场景。</p>
<h5 id="version30">Version3.0</h5>
<p>要创建连接对象时一般使用foreachPartition来解决这个问题，这样每个partition中只创建一个连接对象，使用它来对该partition内的每个元素进行输出。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">val result = stream.flatMap(_.split(<span class="string">","</span>)).map((_, <span class="number">1</span>)).reduceByKey(_ + _)</span><br><span class="line">result.foreachRDD(<span class="function"><span class="params">rdd</span> =&gt;</span> &#123;</span><br><span class="line">  rdd.foreachPartition(<span class="function"><span class="params">partition</span> =&gt;</span> &#123;</span><br><span class="line">    val connection = MySQLUtils.getConnection() <span class="comment">//每个分区创建一个partition</span></span><br><span class="line">    partition.foreach(<span class="function"><span class="params">pair</span> =&gt;</span> &#123;</span><br><span class="line">      val sql = s<span class="string">"insert into wc(word,cnt) values('$&#123;pair._1&#125;',$&#123;pair._2&#125;)"</span></span><br><span class="line">      connection.createStatement().execute(sql)</span><br><span class="line">  &#125;)</span><br><span class="line">  MySQLUtils.closeConnection(connection)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h5 id="version40">Version4.0</h5>
<p>更进一步的话，在处理一批RDD时，可以使用数据库连接池来重复使用连接对象，注意连接池必须是静态、懒加载的。<br>
可以借助Scalikejdbc来实现：<a href="http://scalikejdbc.org/" target="_blank" rel="noopener">http://scalikejdbc.org/</a><br>
1）加入依赖</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.scalikejdbc&lt;<span class="regexp">/groupId&gt;</span></span><br><span class="line"><span class="regexp">    &lt;artifactId&gt;scalikejdbc_$&#123;scala.tools.version&#125;&lt;/</span>artifactId&gt;</span><br><span class="line">    &lt;version&gt;$&#123;scalikejdbc.version&#125;&lt;<span class="regexp">/version&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>dependency&gt;</span><br><span class="line"></span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.scalikejdbc&lt;<span class="regexp">/groupId&gt;</span></span><br><span class="line"><span class="regexp">    &lt;artifactId&gt;scalikejdbc-config_$&#123;scala.tools.version&#125;&lt;/</span>artifactId&gt;</span><br><span class="line">    &lt;version&gt;$&#123;scalikejdbc.version&#125;&lt;<span class="regexp">/version&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>dependency&gt;</span><br></pre></td></tr></table></figure>
<p>2）创建数据库连接配置信息<br>
resources下创建application.conf</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># JDBC Settings</span><br><span class="line">db.default.driver = <span class="string">"com.mysql.jdbc.Driver"</span></span><br><span class="line">db.default.url = <span class="string">"jdbc:mysql://localhost:3306/demo?useSSL=false&amp;serverTimezone=UTC"</span></span><br><span class="line">db.default.user = <span class="string">"root"</span></span><br><span class="line">db.default.password = <span class="string">"123456"</span></span><br><span class="line"> </span><br><span class="line"># Connection Pool settings</span><br><span class="line">db.default.poolInitialSize = <span class="number">10</span></span><br><span class="line">db.default.poolMaxSize = <span class="number">20</span></span><br><span class="line">db.default.connectionTimeoutMillis = <span class="number">1000</span></span><br></pre></td></tr></table></figure>
<p>3）使用</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">val result = stream.flatMap(_.split(<span class="string">","</span>)).map((_, <span class="number">1</span>)).reduceByKey(_ + _)</span><br><span class="line"></span><br><span class="line">DBs.setupAll() <span class="comment">//解析配置文件application.conf</span></span><br><span class="line">result.foreachRDD(<span class="function"><span class="params">rdd</span> =&gt;</span> &#123;</span><br><span class="line">  rdd.foreachPartition(<span class="function"><span class="params">partition</span> =&gt;</span> &#123;</span><br><span class="line">    partition.foreach(<span class="function"><span class="params">pair</span> =&gt;</span> &#123;</span><br><span class="line">      DB.autoCommit &#123;implicit session =&gt; &#123;</span><br><span class="line">         <span class="comment">// 默认就使用了连接池</span></span><br><span class="line">         SQL(<span class="string">"insert into wc(word,cnt) values(?,?)"</span>)</span><br><span class="line">         .bind(pair._1, pair._2)</span><br><span class="line">         .update()</span><br><span class="line">         .apply()</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

                

                <hr>
                <!-- Pager -->
                <ul class="pager">
                    
                        <li class="previous">
                            <a href="/article/2.spark-2.4.5-bin-2.6.0-cdh5.15.1.tgz/" data-toggle="tooltip" data-placement="top" title=" Spark-2.4.5源码编译">&larr; Previous Post</a>
                        </li>
                    
                    
                        <li class="next">
                            <a href="/article/8.spark工作模式详解(localstandaloneyarn)/" data-toggle="tooltip" data-placement="top" title=" Spark工作模式详解(local/standalone/yarn) ">Next Post &rarr;</a>
                        </li>
                    
                </ul>

                <br>

                <!--打赏-->
                
                <!--打赏-->

                <br>
                <!--分享-->
                
                    <div class="social-share"  data-wechat-qrcode-helper="" align="center"></div>
                    <!--  css & js -->
                    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/css/share.min.css">
                    <script src="https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/js/social-share.min.js"></script>
                
                <!--分享-->
                <br>                       
                
                <!-- require APlayer -->
                

                <!-- duoshuo Share start -->
                
                <!-- 多说 Share end-->

                <!-- 多说评论框 start -->
                
                <!-- 多说评论框 end -->

                <!-- disqus comment start -->
                
                <!-- disqus comment end -->

                

            </div>
            
            <!-- Tabe of Content -->
            <!-- Table of Contents -->

  
    
      <aside id="sidebar">
        <div id="toc" class="toc-article">
        <strong class="toc-title">Contents</strong>
        
          <ol class="toc-nav"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#spark-streaming中foreachrdd的使用"><span class="toc-nav-number">1.</span> <span class="toc-nav-text">Spark Streaming&#x4E2D;foreachRDD&#x7684;&#x4F7F;&#x7528;</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#概述"><span class="toc-nav-number">1.1.</span> <span class="toc-nav-text">&#x6982;&#x8FF0;</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#测试"><span class="toc-nav-number">1.2.</span> <span class="toc-nav-text">&#x6D4B;&#x8BD5;</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#version10"><span class="toc-nav-number">1.2.1.</span> <span class="toc-nav-text">Version1.0</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#version20"><span class="toc-nav-number">1.2.2.</span> <span class="toc-nav-text">Version2.0</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#version30"><span class="toc-nav-number">1.2.3.</span> <span class="toc-nav-text">Version3.0</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#version40"><span class="toc-nav-number">1.2.4.</span> <span class="toc-nav-text">Version4.0</span></a></li></ol></li></ol></li></ol>
        
        </div>
      </aside>
    

                
            <!-- Sidebar Container -->
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                sidebar-container">

                <!-- Featured Tags -->
                
                <section>
                    <!-- no hr -->
                    <h5><a href="/tags/">FEATURED TAGS</a></h5>
                    <div class="tags">
                       
                          <a class="tag" href="/tags/#spark" title="spark">spark</a>
                        
                    </div>
                </section>
                

                <!-- Friends Blog -->
                
            </div>
        </div>
    </div>
</article>








<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>
<!-- anchor-js, Doc:http://bryanbraun.github.io/anchorjs/ -->
<script>
    async("https://cdn.bootcss.com/anchor-js/1.1.1/anchor.min.js",function(){
        anchors.options = {
          visible: 'hover',
          placement: 'left',
          icon: 'rz'
        };
        anchors.add().remove('.intro-header h1').remove('.subheading').remove('.sidebar-container h5');
    })
</script>
<style>
    /* place left on bigger screen */
    @media all and (min-width: 800px) {
        .anchorjs-link{
            position: absolute;
            left: -0.75em;
            font-size: 1.1em;
            margin-top : -0.1em;
        }
    }
</style>


<!-- chrome Firefox 中文锚点定位失效-->
<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.js"></script>
<!-- smooth scroll behavior polyfill  -->
<script type="text/javascript" src="/js/smoothscroll.js"></script>
<script>
        $('#toc').on('click','a',function(a){
            // var isChrome = window.navigator.userAgent.indexOf("Chrome") !== -1;
            // console.log(window.navigator.userAgent,isChrome)
                // if(isChrome) {
                    // console.log(a.currentTarget.outerHTML);
                    // console.log($(a.currentTarget).attr("href"));
                    //跳转到指定锚点
                    // document.getElementById(a.target.innerText.toLowerCase()).scrollIntoView(true);
                    document.getElementById($(a.currentTarget).attr("href").replace("#","")).scrollIntoView({behavior: 'smooth' });
                // }
        })  
</script>


    <!-- Footer -->
    <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                
                
                

                

                


<!-- 暗夜橙子页脚 -->
                <p class="copyright text-muted">
                    Copyright &copy; 2018 By 暗也橙子 | BigData
                    <iframe
                        style="margin-left: 2px; margin-bottom:-5px;"
                        frameborder="0" scrolling="0" width="91px" height="20px"
                    </iframe>
                </p>
            </div>
        </div>
    </div>
</footer>

<!-- jQuery -->
<script src="/js/jquery.min.js"></script>

<!-- Bootstrap Core JavaScript -->
<script src="/js/bootstrap.min.js"></script>

<!-- Custom Theme JavaScript -->
<script src="/js/hux-blog.min.js"></script>


<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>

<!-- 
     Because of the native support for backtick-style fenced code blocks 
     right within the Markdown is landed in Github Pages, 
     From V1.6, There is no need for Highlight.js, 
     so Huxblog drops it officially.

     - https://github.com/blog/2100-github-pages-now-faster-and-simpler-with-jekyll-3-0  
     - https://help.github.com/articles/creating-and-highlighting-code-blocks/    
-->
<!--
    <script>
        async("http://cdn.bootcss.com/highlight.js/8.6/highlight.min.js", function(){
            hljs.initHighlightingOnLoad();
        })
    </script>
    <link href="http://cdn.bootcss.com/highlight.js/8.6/styles/github.min.css" rel="stylesheet">
-->


<!-- jquery.tagcloud.js -->
<script>
    // only load tagcloud.js in tag.html
    if($('#tag_cloud').length !== 0){
        async("http://www.ruozedata.com/js/jquery.tagcloud.js",function(){
            $.fn.tagcloud.defaults = {
                //size: {start: 1, end: 1, unit: 'em'},
                color: {start: '#bbbbee', end: '#0085a1'},
            };
            $('#tag_cloud a').tagcloud();
        })
    }
</script>

<!--fastClick.js -->
<script>
    async("https://cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js", function(){
        var $nav = document.querySelector("nav");
        if($nav) FastClick.attach($nav);
    })
</script>


<!-- Google Analytics -->


<script>
    // dynamic User by Hux
    var _gaId = 'UA-XXXXXXXX-X';
    var _gaDomain = 'yoursite';

    // Originial
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', _gaId, _gaDomain);
    ga('send', 'pageview');
</script>




<!-- Baidu Tongji -->

<script>
    // dynamic User by Hux
    var _baId = 'xxx';

    // Originial
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?" + _baId;
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
</script>






	<a id="rocket" href="#top" class=""></a>
	<script type="text/javascript" src="/js/totop.js?v=1.0.0" async=""></script>
    <script type="text/javascript" src="/js/toc.js?v=1.0.0" async=""></script>
<!-- Image to hack wechat -->
<img src="http://www.ruozedata.com/img/icon_wechat.png" width="0" height="0" />
<!-- Migrate from head to bottom, no longer block render and still work -->

</body>

</html>
